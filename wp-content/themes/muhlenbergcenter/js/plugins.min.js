!function(){for(var t,e=function(){},i=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],s=i.length,a=window.console=window.console||{};s--;)t=i[s],a[t]||(a[t]=e)}(),function(t,e,i){"use strict";Foundation.libs.topbar={name:"topbar",version:"5.5.1",settings:{index:0,sticky_class:"sticky",custom_back_text:!0,back_text:"Back",mobile_show_parent_link:!0,is_hover:!0,scrolltop:!0,sticky_on:"all"},init:function(e,i,s){Foundation.inherit(this,"add_custom_rule register_media throttle");var a=this;a.register_media("topbar","foundation-mq-topbar"),this.bindings(i,s),a.S("["+this.attr_name()+"]",this.scope).each(function(){{var e=t(this),i=e.data(a.attr_name(!0)+"-init");a.S("section, .top-bar-section",this)}e.data("index",0);var s=e.parent();s.hasClass("fixed")||a.is_sticky(e,s,i)?(a.settings.sticky_class=i.sticky_class,a.settings.sticky_topbar=e,e.data("height",s.outerHeight()),e.data("stickyoffset",s.offset().top)):e.data("height",e.outerHeight()),i.assembled||a.assemble(e),i.is_hover?a.S(".has-dropdown",e).addClass("not-click"):a.S(".has-dropdown",e).removeClass("not-click"),a.add_custom_rule(".f-topbar-fixed { padding-top: "+e.data("height")+"px }"),s.hasClass("fixed")&&a.S("body").addClass("f-topbar-fixed")})},is_sticky:function(t,e,i){var s=e.hasClass(i.sticky_class),a=matchMedia(Foundation.media_queries.small).matches,n=matchMedia(Foundation.media_queries.medium).matches,r=matchMedia(Foundation.media_queries.large).matches;return s&&"all"===i.sticky_on?!0:s&&this.small()&&-1!==i.sticky_on.indexOf("small")&&a&&!n&&!r?!0:s&&this.medium()&&-1!==i.sticky_on.indexOf("medium")&&a&&n&&!r?!0:s&&this.large()&&-1!==i.sticky_on.indexOf("large")&&a&&n&&r?!0:s&&navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1},toggle:function(i){var s,a=this;s=i?a.S(i).closest("["+this.attr_name()+"]"):a.S("["+this.attr_name()+"]");var n=s.data(this.attr_name(!0)+"-init"),r=a.S("section, .top-bar-section",s);a.breakpoint()&&(a.rtl?(r.css({right:"0%"}),t(">.name",r).css({right:"100%"})):(r.css({left:"0%"}),t(">.name",r).css({left:"100%"})),a.S("li.moved",r).removeClass("moved"),s.data("index",0),s.toggleClass("expanded").css("height","")),n.scrolltop?s.hasClass("expanded")?s.parent().hasClass("fixed")&&(n.scrolltop?(s.parent().removeClass("fixed"),s.addClass("fixed"),a.S("body").removeClass("f-topbar-fixed"),e.scrollTo(0,0)):s.parent().removeClass("expanded")):s.hasClass("fixed")&&(s.parent().addClass("fixed"),s.removeClass("fixed"),a.S("body").addClass("f-topbar-fixed")):(a.is_sticky(s,s.parent(),n)&&s.parent().addClass("fixed"),s.parent().hasClass("fixed")&&(s.hasClass("expanded")?(s.addClass("fixed"),s.parent().addClass("expanded"),a.S("body").addClass("f-topbar-fixed")):(s.removeClass("fixed"),s.parent().removeClass("expanded"),a.update_sticky_positioning())))},timer:null,events:function(){var i=this,s=this.S;s(this.scope).off(".topbar").on("click.fndtn.topbar","["+this.attr_name()+"] .toggle-topbar",function(t){t.preventDefault(),i.toggle(this)}).on("click.fndtn.topbar",'.top-bar .top-bar-section li a[href^="#"],['+this.attr_name()+'] .top-bar-section li a[href^="#"]',function(){var e=t(this).closest("li");!i.breakpoint()||e.hasClass("back")||e.hasClass("has-dropdown")||i.toggle()}).on("click.fndtn.topbar","["+this.attr_name()+"] li.has-dropdown",function(e){var a=s(this),n=s(e.target),r=a.closest("["+i.attr_name()+"]"),o=r.data(i.attr_name(!0)+"-init");return n.data("revealId")?void i.toggle():void(i.breakpoint()||(!o.is_hover||Modernizr.touch)&&(e.stopImmediatePropagation(),a.hasClass("hover")?(a.removeClass("hover").find("li").removeClass("hover"),a.parents("li.hover").removeClass("hover")):(a.addClass("hover"),t(a).siblings().removeClass("hover"),"A"===n[0].nodeName&&n.parent().hasClass("has-dropdown")&&e.preventDefault())))}).on("click.fndtn.topbar","["+this.attr_name()+"] .has-dropdown>a",function(t){if(i.breakpoint()){t.preventDefault();var e=s(this),a=e.closest("["+i.attr_name()+"]"),n=a.find("section, .top-bar-section"),r=(e.next(".dropdown").outerHeight(),e.closest("li"));a.data("index",a.data("index")+1),r.addClass("moved"),i.rtl?(n.css({right:-(100*a.data("index"))+"%"}),n.find(">.name").css({right:100*a.data("index")+"%"})):(n.css({left:-(100*a.data("index"))+"%"}),n.find(">.name").css({left:100*a.data("index")+"%"})),a.css("height",e.siblings("ul").outerHeight(!0)+a.data("height"))}}),s(e).off(".topbar").on("resize.fndtn.topbar",i.throttle(function(){i.resize.call(i)},50)).trigger("resize").trigger("resize.fndtn.topbar").load(function(){s(this).trigger("resize.fndtn.topbar")}),s("body").off(".topbar").on("click.fndtn.topbar",function(t){var e=s(t.target).closest("li").closest("li.hover");e.length>0||s("["+i.attr_name()+"] li.hover").removeClass("hover")}),s(this.scope).on("click.fndtn.topbar","["+this.attr_name()+"] .has-dropdown .back",function(t){t.preventDefault();var e=s(this),a=e.closest("["+i.attr_name()+"]"),n=a.find("section, .top-bar-section"),r=(a.data(i.attr_name(!0)+"-init"),e.closest("li.moved")),o=r.parent();a.data("index",a.data("index")-1),i.rtl?(n.css({right:-(100*a.data("index"))+"%"}),n.find(">.name").css({right:100*a.data("index")+"%"})):(n.css({left:-(100*a.data("index"))+"%"}),n.find(">.name").css({left:100*a.data("index")+"%"})),0===a.data("index")?a.css("height",""):a.css("height",o.outerHeight(!0)+a.data("height")),setTimeout(function(){r.removeClass("moved")},300)}),s(this.scope).find(".dropdown a").focus(function(){t(this).parents(".has-dropdown").addClass("hover")}).blur(function(){t(this).parents(".has-dropdown").removeClass("hover")})},resize:function(){var t=this;t.S("["+this.attr_name()+"]").each(function(){var e,s=t.S(this),a=s.data(t.attr_name(!0)+"-init"),n=s.parent("."+t.settings.sticky_class);if(!t.breakpoint()){var r=s.hasClass("expanded");s.css("height","").removeClass("expanded").find("li").removeClass("hover"),r&&t.toggle(s)}t.is_sticky(s,n,a)&&(n.hasClass("fixed")?(n.removeClass("fixed"),e=n.offset().top,t.S(i.body).hasClass("f-topbar-fixed")&&(e-=s.data("height")),s.data("stickyoffset",e),n.addClass("fixed")):(e=n.offset().top,s.data("stickyoffset",e)))})},breakpoint:function(){return!matchMedia(Foundation.media_queries.topbar).matches},small:function(){return matchMedia(Foundation.media_queries.small).matches},medium:function(){return matchMedia(Foundation.media_queries.medium).matches},large:function(){return matchMedia(Foundation.media_queries.large).matches},assemble:function(e){var i=this,s=e.data(this.attr_name(!0)+"-init"),a=i.S("section, .top-bar-section",e);a.detach(),i.S(".has-dropdown>a",a).each(function(){var e,a=i.S(this),n=a.siblings(".dropdown"),r=a.attr("href");n.find(".title.back").length||(e=t(1==s.mobile_show_parent_link&&r?'<li class="title back js-generated"><h5><a href="javascript:void(0)"></a></h5></li><li class="parent-link hide-for-large-up"><a class="parent-link js-generated" href="'+r+'">'+a.html()+"</a></li>":'<li class="title back js-generated"><h5><a href="javascript:void(0)"></a></h5>'),t("h5>a",e).html(1==s.custom_back_text?s.back_text:"&laquo; "+a.html()),n.prepend(e))}),a.appendTo(e),this.sticky(),this.assembled(e)},assembled:function(e){e.data(this.attr_name(!0),t.extend({},e.data(this.attr_name(!0)),{assembled:!0}))},height:function(e){var i=0,s=this;return t("> li",e).each(function(){i+=s.S(this).outerHeight(!0)}),i},sticky:function(){var t=this;this.S(e).on("scroll",function(){t.update_sticky_positioning()})},update_sticky_positioning:function(){var t="."+this.settings.sticky_class,i=this.S(e),s=this;if(s.settings.sticky_topbar&&s.is_sticky(this.settings.sticky_topbar,this.settings.sticky_topbar.parent(),this.settings)){var a=this.settings.sticky_topbar.data("stickyoffset");s.S(t).hasClass("expanded")||(i.scrollTop()>a?s.S(t).hasClass("fixed")||(s.S(t).addClass("fixed"),s.S("body").addClass("f-topbar-fixed")):i.scrollTop()<=a&&s.S(t).hasClass("fixed")&&(s.S(t).removeClass("fixed"),s.S("body").removeClass("f-topbar-fixed")))}},off:function(){this.S(this.scope).off(".fndtn.topbar"),this.S(e).off(".fndtn.topbar")},reflow:function(){}}}(jQuery,window,window.document),function(t,e,i,s){"use strict";var a=function(){},n=function(a,n){if(a.hasClass(n.slides_container_class))return this;var c,d,h,u,f,g,p=this,_=a,m=0,v=!1;p.slides=function(){return _.children(n.slide_selector)},p.slides().first().addClass(n.active_slide_class),p.update_slide_number=function(e){n.slide_number&&(d.find("span:first").text(parseInt(e)+1),d.find("span:last").text(p.slides().length)),n.bullets&&(h.children().removeClass(n.bullets_active_class),t(h.children().get(e)).addClass(n.bullets_active_class))},p.update_active_link=function(e){var i=t('[data-orbit-link="'+p.slides().eq(e).attr("data-orbit-slide")+'"]');i.siblings().removeClass(n.bullets_active_class),i.addClass(n.bullets_active_class)},p.build_markup=function(){_.wrap('<div class="'+n.container_class+'"></div>'),c=_.parent(),_.addClass(n.slides_container_class),n.stack_on_small&&c.addClass(n.stack_on_small_class),n.navigation_arrows&&(c.append(t('<a href="#"><span></span></a>').addClass(n.prev_class)),c.append(t('<a href="#"><span></span></a>').addClass(n.next_class))),n.timer&&(u=t("<div>").addClass(n.timer_container_class),u.append("<span>"),u.append(t("<div>").addClass(n.timer_progress_class)),u.addClass(n.timer_paused_class),c.append(u)),n.slide_number&&(d=t("<div>").addClass(n.slide_number_class),d.append("<span></span> "+n.slide_number_text+" <span></span>"),c.append(d)),n.bullets&&(h=t("<ol>").addClass(n.bullets_container_class),c.append(h),h.wrap('<div class="orbit-bullets-container"></div>'),p.slides().each(function(e){var i=t("<li>").attr("data-orbit-slide",e).on("click",p.link_bullet);h.append(i)}))},p._goto=function(e,i){if(e===m)return!1;"object"==typeof g&&g.restart();var s=p.slides(),a="next";if(v=!0,m>e&&(a="prev"),e>=s.length){if(!n.circular)return!1;e=0}else if(0>e){if(!n.circular)return!1;e=s.length-1}var r=t(s.get(m)),o=t(s.get(e));r.css("zIndex",2),r.removeClass(n.active_slide_class),o.css("zIndex",4).addClass(n.active_slide_class),_.trigger("before-slide-change.fndtn.orbit"),n.before_slide_change(),p.update_active_link(e);var l=function(){var t=function(){m=e,v=!1,i===!0&&(g=p.create_timer(),g.start()),p.update_slide_number(m),_.trigger("after-slide-change.fndtn.orbit",[{slide_number:m,total_slides:s.length}]),n.after_slide_change(m,s.length)};_.outerHeight()!=o.outerHeight()&&n.variable_height?_.animate({height:o.outerHeight()},250,"linear",t):t()};if(1===s.length)return l(),!1;var c=function(){"next"===a&&f.next(r,o,l),"prev"===a&&f.prev(r,o,l)};o.outerHeight()>_.outerHeight()&&n.variable_height?_.animate({height:o.outerHeight()},250,"linear",c):c()},p.next=function(t){t.stopImmediatePropagation(),t.preventDefault(),p._goto(m+1)},p.prev=function(t){t.stopImmediatePropagation(),t.preventDefault(),p._goto(m-1)},p.link_custom=function(e){e.preventDefault();var i=t(this).attr("data-orbit-link");if("string"==typeof i&&""!=(i=t.trim(i))){var s=c.find("[data-orbit-slide="+i+"]");-1!=s.index()&&p._goto(s.index())}},p.link_bullet=function(){var e=t(this).attr("data-orbit-slide");if("string"==typeof e&&""!=(e=t.trim(e)))if(isNaN(parseInt(e))){var i=c.find("[data-orbit-slide="+e+"]");-1!=i.index()&&p._goto(i.index()+1)}else p._goto(parseInt(e))},p.timer_callback=function(){p._goto(m+1,!0)},p.compute_dimensions=function(){var e=t(p.slides().get(m)),i=e.outerHeight();n.variable_height||p.slides().each(function(){t(this).outerHeight()>i&&(i=t(this).outerHeight())}),_.height(i)},p.create_timer=function(){var t=new r(c.find("."+n.timer_container_class),n,p.timer_callback);return t},p.stop_timer=function(){"object"==typeof g&&g.stop()},p.toggle_timer=function(){var t=c.find("."+n.timer_container_class);t.hasClass(n.timer_paused_class)?("undefined"==typeof g&&(g=p.create_timer()),g.start()):"object"==typeof g&&g.stop()},p.init=function(){p.build_markup(),n.timer&&(g=p.create_timer(),Foundation.utils.image_loaded(this.slides().children("img"),g.start)),f=new l(n,_),"slide"===n.animation&&(f=new o(n,_)),c.on("click","."+n.next_class,p.next),c.on("click","."+n.prev_class,p.prev),n.next_on_click&&c.on("click","."+n.slides_container_class+" [data-orbit-slide]",p.link_bullet),c.on("click",p.toggle_timer),n.swipe&&c.on("touchstart.fndtn.orbit",function(t){t.touches||(t=t.originalEvent);var e={start_page_x:t.touches[0].pageX,start_page_y:t.touches[0].pageY,start_time:(new Date).getTime(),delta_x:0,is_scrolling:s};c.data("swipe-transition",e),t.stopPropagation()}).on("touchmove.fndtn.orbit",function(t){if(t.touches||(t=t.originalEvent),!(t.touches.length>1||t.scale&&1!==t.scale)){var e=c.data("swipe-transition");if("undefined"==typeof e&&(e={}),e.delta_x=t.touches[0].pageX-e.start_page_x,"undefined"==typeof e.is_scrolling&&(e.is_scrolling=!!(e.is_scrolling||Math.abs(e.delta_x)<Math.abs(t.touches[0].pageY-e.start_page_y))),!e.is_scrolling&&!e.active){t.preventDefault();var i=e.delta_x<0?m+1:m-1;e.active=!0,p._goto(i)}}}).on("touchend.fndtn.orbit",function(t){c.data("swipe-transition",{}),t.stopPropagation()}),c.on("mouseenter.fndtn.orbit",function(){n.timer&&n.pause_on_hover&&p.stop_timer()}).on("mouseleave.fndtn.orbit",function(){n.timer&&n.resume_on_mouseout&&g.start()}),t(i).on("click","[data-orbit-link]",p.link_custom),t(e).on("load resize",p.compute_dimensions),Foundation.utils.image_loaded(this.slides().children("img"),p.compute_dimensions),Foundation.utils.image_loaded(this.slides().children("img"),function(){c.prev("."+n.preloader_class).css("display","none"),p.update_slide_number(0),p.update_active_link(0),_.trigger("ready.fndtn.orbit")})},p.init()},r=function(t,e,i){var s,a,n=this,r=e.timer_speed,o=t.find("."+e.timer_progress_class),l=-1;this.update_progress=function(t){var e=o.clone();e.attr("style",""),e.css("width",t+"%"),o.replaceWith(e),o=e},this.restart=function(){clearTimeout(a),t.addClass(e.timer_paused_class),l=-1,n.update_progress(0)},this.start=function(){return t.hasClass(e.timer_paused_class)?(l=-1===l?r:l,t.removeClass(e.timer_paused_class),s=(new Date).getTime(),o.animate({width:"100%"},l,"linear"),a=setTimeout(function(){n.restart(),i()},l),void t.trigger("timer-started.fndtn.orbit")):!0},this.stop=function(){if(t.hasClass(e.timer_paused_class))return!0;clearTimeout(a),t.addClass(e.timer_paused_class);var i=(new Date).getTime();l-=i-s;var o=100-l/r*100;n.update_progress(o),t.trigger("timer-stopped.fndtn.orbit")}},o=function(e){var i=e.animation_speed,s=1===t("html[dir=rtl]").length,a=s?"marginRight":"marginLeft",n={};n[a]="0%",this.next=function(t,e,s){t.animate({marginLeft:"-100%"},i),e.animate(n,i,function(){t.css(a,"100%"),s()})},this.prev=function(t,e,s){t.animate({marginLeft:"100%"},i),e.css(a,"-100%"),e.animate(n,i,function(){t.css(a,"100%"),s()})}},l=function(e){{var i=e.animation_speed;1===t("html[dir=rtl]").length}this.next=function(t,e,s){e.css({margin:"0%",opacity:"0.01"}),e.animate({opacity:"1"},i,"linear",function(){t.css("margin","100%"),s()})},this.prev=function(t,e,s){e.css({margin:"0%",opacity:"0.01"}),e.animate({opacity:"1"},i,"linear",function(){t.css("margin","100%"),s()})}};Foundation.libs=Foundation.libs||{},Foundation.libs.orbit={name:"orbit",version:"5.5.1",settings:{animation:"slide",timer_speed:1e4,pause_on_hover:!0,resume_on_mouseout:!1,next_on_click:!0,animation_speed:500,stack_on_small:!1,navigation_arrows:!0,slide_number:!0,slide_number_text:"of",container_class:"orbit-container",stack_on_small_class:"orbit-stack-on-small",next_class:"orbit-next",prev_class:"orbit-prev",timer_container_class:"orbit-timer",timer_paused_class:"paused",timer_progress_class:"orbit-progress",slides_container_class:"orbit-slides-container",preloader_class:"preloader",slide_selector:"*",bullets_container_class:"orbit-bullets",bullets_active_class:"active",slide_number_class:"orbit-slide-number",caption_class:"orbit-caption",active_slide_class:"active",orbit_transition_class:"orbit-transitioning",bullets:!0,circular:!0,timer:!0,variable_height:!1,swipe:!0,before_slide_change:a,after_slide_change:a},init:function(t,e,i){this.bindings(e,i)},events:function(t){var e=new n(this.S(t),this.S(t).data("orbit-init"));this.S(t).data(this.name+"-instance",e)},reflow:function(){var t=this;if(t.S(t.scope).is("[data-orbit]")){var e=t.S(t.scope),i=e.data(t.name+"-instance");i.compute_dimensions()}else t.S("[data-orbit]",t.scope).each(function(e,i){var s=t.S(i),a=(t.data_options(s),s.data(t.name+"-instance"));a.compute_dimensions()})}}}(jQuery,window,window.document),function(t,e){"use strict";Foundation.libs.equalizer={name:"equalizer",version:"5.5.1",settings:{use_tallest:!0,before_height_change:t.noop,after_height_change:t.noop,equalize_on_stack:!1},init:function(t,e,i){Foundation.inherit(this,"image_loaded"),this.bindings(e,i),this.reflow()},events:function(){this.S(e).off(".equalizer").on("resize.fndtn.equalizer",function(){this.reflow()}.bind(this))},equalize:function(e){var i=!1,s=e.find("["+this.attr_name()+"-watch]:visible"),a=e.data(this.attr_name(!0)+"-init");if(0!==s.length){var n=s.first().offset().top;if(a.before_height_change(),e.trigger("before-height-change").trigger("before-height-change.fndth.equalizer"),s.height("inherit"),s.each(function(){var e=t(this);e.offset().top!==n&&(i=!0)}),a.equalize_on_stack!==!1||!i){var r=s.map(function(){return t(this).outerHeight(!1)}).get();if(a.use_tallest){var o=Math.max.apply(null,r);s.css("height",o)}else{var l=Math.min.apply(null,r);s.css("height",l)}a.after_height_change(),e.trigger("after-height-change").trigger("after-height-change.fndtn.equalizer")}}},reflow:function(){var e=this;this.S("["+this.attr_name()+"]",this.scope).each(function(){var i=t(this);e.image_loaded(e.S("img",this),function(){e.equalize(i)})})}}}(jQuery,window,window.document),function(t,e,i,s){"use strict";Foundation.libs.clearing={name:"clearing",version:"5.5.1",settings:{templates:{viewing:'<a href="#" class="clearing-close">&times;</a><div class="visible-img" style="display: none"><div class="clearing-touch-label"></div><img src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D" alt="" /><p class="clearing-caption"></p><a href="#" class="clearing-main-prev"><span></span></a><a href="#" class="clearing-main-next"><span></span></a></div>'},close_selectors:".clearing-close, div.clearing-blackout",open_selectors:"",skip_selector:"",touch_label:"",init:!1,locked:!1},init:function(t,e,i){var s=this;Foundation.inherit(this,"throttle image_loaded"),this.bindings(e,i),s.S(this.scope).is("["+this.attr_name()+"]")?this.assemble(s.S("li",this.scope)):s.S("["+this.attr_name()+"]",this.scope).each(function(){s.assemble(s.S("li",this))})},events:function(s){var a=this,n=a.S,r=t(".scroll-container");r.length>0&&(this.scope=r),n(this.scope).off(".clearing").on("click.fndtn.clearing","ul["+this.attr_name()+"] li "+this.settings.open_selectors,function(t,e,i){var e=e||n(this),i=i||e,s=e.next("li"),r=e.closest("["+a.attr_name()+"]").data(a.attr_name(!0)+"-init"),o=n(t.target);t.preventDefault(),r||(a.init(),r=e.closest("["+a.attr_name()+"]").data(a.attr_name(!0)+"-init")),i.hasClass("visible")&&e[0]===i[0]&&s.length>0&&a.is_open(e)&&(i=s,o=n("img",i)),a.open(o,e,i),a.update_paddles(i)}).on("click.fndtn.clearing",".clearing-main-next",function(t){a.nav(t,"next")}).on("click.fndtn.clearing",".clearing-main-prev",function(t){a.nav(t,"prev")}).on("click.fndtn.clearing",this.settings.close_selectors,function(t){Foundation.libs.clearing.close(t,this)}),t(i).on("keydown.fndtn.clearing",function(t){a.keydown(t)}),n(e).off(".clearing").on("resize.fndtn.clearing",function(){a.resize()}),this.swipe_events(s)},swipe_events:function(){var t=this,e=t.S;e(this.scope).on("touchstart.fndtn.clearing",".visible-img",function(t){t.touches||(t=t.originalEvent);var i={start_page_x:t.touches[0].pageX,start_page_y:t.touches[0].pageY,start_time:(new Date).getTime(),delta_x:0,is_scrolling:s};e(this).data("swipe-transition",i),t.stopPropagation()}).on("touchmove.fndtn.clearing",".visible-img",function(i){if(i.touches||(i=i.originalEvent),!(i.touches.length>1||i.scale&&1!==i.scale)){var s=e(this).data("swipe-transition");if("undefined"==typeof s&&(s={}),s.delta_x=i.touches[0].pageX-s.start_page_x,Foundation.rtl&&(s.delta_x=-s.delta_x),"undefined"==typeof s.is_scrolling&&(s.is_scrolling=!!(s.is_scrolling||Math.abs(s.delta_x)<Math.abs(i.touches[0].pageY-s.start_page_y))),!s.is_scrolling&&!s.active){i.preventDefault();var a=s.delta_x<0?"next":"prev";s.active=!0,t.nav(i,a)}}}).on("touchend.fndtn.clearing",".visible-img",function(t){e(this).data("swipe-transition",{}),t.stopPropagation()})},assemble:function(e){var i=e.parent();if(!i.parent().hasClass("carousel")){i.after('<div id="foundationClearingHolder"></div>');var s=i.detach(),a="";if(null!=s[0]){a=s[0].outerHTML;var n=this.S("#foundationClearingHolder"),r=i.data(this.attr_name(!0)+"-init"),o={grid:'<div class="carousel">'+a+"</div>",viewing:r.templates.viewing},l='<div class="clearing-assembled"><div>'+o.viewing+o.grid+"</div></div>",c=this.settings.touch_label;Modernizr.touch&&(l=t(l).find(".clearing-touch-label").html(c).end()),n.after(l).remove()}}},open:function(e,s,a){function n(){setTimeout(function(){this.image_loaded(u,function(){1!==u.outerWidth()||g?r.call(this,u):n.call(this)}.bind(this))}.bind(this),100)}function r(e){var i=t(e);i.css("visibility","visible"),l.css("overflow","hidden"),c.addClass("clearing-blackout"),d.addClass("clearing-container"),h.show(),this.fix_height(a).caption(o.S(".clearing-caption",h),o.S("img",a)).center_and_label(e,f).shift(s,a,function(){a.closest("li").siblings().removeClass("visible"),a.closest("li").addClass("visible")}),h.trigger("opened.fndtn.clearing")}var o=this,l=t(i.body),c=a.closest(".clearing-assembled"),d=o.S("div",c).first(),h=o.S(".visible-img",d),u=o.S("img",h).not(e),f=o.S(".clearing-touch-label",d),g=!1;t("body").on("touchmove",function(t){t.preventDefault()}),u.error(function(){g=!0}),this.locked()||(h.trigger("open.fndtn.clearing"),u.attr("src",this.load(e)).css("visibility","hidden"),n.call(this))},close:function(e,s){e.preventDefault();var a,n,r=function(t){return/blackout/.test(t.selector)?t:t.closest(".clearing-blackout")}(t(s)),o=t(i.body);return s===e.target&&r&&(o.css("overflow",""),a=t("div",r).first(),n=t(".visible-img",a),n.trigger("close.fndtn.clearing"),this.settings.prev_index=0,t("ul["+this.attr_name()+"]",r).attr("style","").closest(".clearing-blackout").removeClass("clearing-blackout"),a.removeClass("clearing-container"),n.hide(),n.trigger("closed.fndtn.clearing")),t("body").off("touchmove"),!1},is_open:function(t){return t.parent().prop("style").length>0},keydown:function(e){var i=t(".clearing-blackout ul["+this.attr_name()+"]"),s=this.rtl?37:39,a=this.rtl?39:37,n=27;e.which===s&&this.go(i,"next"),e.which===a&&this.go(i,"prev"),e.which===n&&this.S("a.clearing-close").trigger("click").trigger("click.fndtn.clearing")},nav:function(e,i){var s=t("ul["+this.attr_name()+"]",".clearing-blackout");e.preventDefault(),this.go(s,i)},resize:function(){var e=t("img",".clearing-blackout .visible-img"),i=t(".clearing-touch-label",".clearing-blackout");e.length&&(this.center_and_label(e,i),e.trigger("resized.fndtn.clearing"))},fix_height:function(t){var e=t.parent().children(),i=this;return e.each(function(){var t=i.S(this),e=t.find("img");t.height()>e.outerHeight()&&t.addClass("fix-height")}).closest("ul").width(100*e.length+"%"),this},update_paddles:function(t){t=t.closest("li");var e=t.closest(".carousel").siblings(".visible-img");t.next().length>0?this.S(".clearing-main-next",e).removeClass("disabled"):this.S(".clearing-main-next",e).addClass("disabled"),t.prev().length>0?this.S(".clearing-main-prev",e).removeClass("disabled"):this.S(".clearing-main-prev",e).addClass("disabled")},center_and_label:function(t,e){return e.css(!this.rtl&&e.length>0?{marginLeft:-(e.outerWidth()/2),marginTop:-(t.outerHeight()/2)-e.outerHeight()-10}:{marginRight:-(e.outerWidth()/2),marginTop:-(t.outerHeight()/2)-e.outerHeight()-10,left:"auto",right:"50%"}),this},load:function(t){var e;return e="A"===t[0].nodeName?t.attr("href"):t.closest("a").attr("href"),this.preload(t),e?e:t.attr("src")},preload:function(t){this.img(t.closest("li").next()).img(t.closest("li").prev())},img:function(t){if(t.length){var e=new Image,i=this.S("a",t);e.src=i.length?i.attr("href"):this.S("img",t).attr("src")}return this},caption:function(t,e){var i=e.attr("data-caption");return i?t.html(i).show():t.text("").hide(),this},go:function(t,e){var i=this.S(".visible",t),s=i[e]();this.settings.skip_selector&&0!=s.find(this.settings.skip_selector).length&&(s=s[e]()),s.length&&this.S("img",s).trigger("click",[i,s]).trigger("click.fndtn.clearing",[i,s]).trigger("change.fndtn.clearing")},shift:function(t,e,i){var s,a=e.parent(),n=this.settings.prev_index||e.index(),r=this.direction(a,t,e),o=this.rtl?"right":"left",l=parseInt(a.css("left"),10),c=e.outerWidth(),d={};e.index()===n||/skip/.test(r)?/skip/.test(r)&&(s=e.index()-this.settings.up_count,this.lock(),s>0?(d[o]=-(s*c),a.animate(d,300,this.unlock())):(d[o]=0,a.animate(d,300,this.unlock()))):/left/.test(r)?(this.lock(),d[o]=l+c,a.animate(d,300,this.unlock())):/right/.test(r)&&(this.lock(),d[o]=l-c,a.animate(d,300,this.unlock())),i()},direction:function(t,e,i){var s,a=this.S("li",t),n=a.outerWidth()+a.outerWidth()/4,r=Math.floor(this.S(".clearing-container").outerWidth()/n)-1,o=a.index(i);return this.settings.up_count=r,s=this.adjacent(this.settings.prev_index,o)?o>r&&o>this.settings.prev_index?"right":o>r-1&&o<=this.settings.prev_index?"left":!1:"skip",this.settings.prev_index=o,s},adjacent:function(t,e){for(var i=e+1;i>=e-1;i--)if(i===t)return!0;return!1},lock:function(){this.settings.locked=!0},unlock:function(){this.settings.locked=!1},locked:function(){return this.settings.locked},off:function(){this.S(this.scope).off(".fndtn.clearing"),this.S(e).off(".fndtn.clearing")},reflow:function(){this.init()}}}(jQuery,window,window.document);