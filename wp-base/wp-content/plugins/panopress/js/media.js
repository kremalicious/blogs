/** PanoPress v.1.1 | Developed by Omer Calev <http://www.omercalev.com/> | Code licensing & documentation <http://www.panopress.org/> **/
$pp=jQuery.noConflict(); function button_action(b){var a=b.find(".urlfile").attr("title"),e=b.find("#w").val(),c=b.find("#h").val(),d=b.find("#t").val(),g=b.find("#a").val(),h=b.find("#p").val(),f="default",b=b.find('[name="b"]');for(i=0;i<b.length;i++)if(b[i].name=b[i].checked)f=b[i].value;a='[pano file="'+a+'"';0<e.length&&(a+=' width="'+e+'"');0<c.length&&(a+=' height="'+c+'"');0<d.length&&(a+=' title="'+d+'"');0<g.length&&(a+=' alt="'+g+'"');0<h.length&&(a+=' preview="'+h+'"');"default"!=f&&(a+=' panobox="'+f+'"');a+= "]";d=window.parent.tinyMCE;null!=d.activeEditor&&!1==d.activeEditor.isHidden()?d.execCommand("mceInsertContent",!1,a):(e=$pp(window.parent.document.getElementById("content")),e.val(e.val()+a));window.parent.tb_remove()} function replace_button(b){var a=b.find(":input").attr("id").replace(/[^0-9]/g,"");if(-1!=b.find(".media-item-info").html().indexOf("application/x-shockwave-flash")){var e=b.find("#del_attachment_"+a),c=$pp('<input type="button" class="pp-button button" value="Embed in post" />');c.click(function(){button_action(b)});var d=$pp('&nbsp;&nbsp;&nbsp;<a href="#" class="del-link">Delete</a>');d.click(function(){$pp("#del_attachment_"+a).slideToggle("fast");return!1});var g=$pp("<tr></tr>"),h=$pp('<th scope="row" class="label" valign="top"><span class="alignleft"><label for="w">PanoPress</label></span></th>'), f=$pp('<td><table><tr><td colspan="2"><p class="help">All inputs are optional.</p></td></tr><tr><td>Width</td><td><input type="text" id="w" style="width:40px" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Height&nbsp;&nbsp;&nbsp;<input type="text" id="h" style="width:40px" /></td></tr><tr><td>Title</td><td colspan="3"><input type="text" id="t" style="width:412px" /></td></tr><tr><td>Alt. Text</td><td colspan="3"><input type="text" id="a" style="width:412px" /></td></tr><tr><td>Preview</td><td colspan="3"><input type="text" id="p" style="width:412px" /></td></tr><tr><td>Panobox</td><td colspan="3"><table cellpadding="0" cellspacing="0"><tr><td><input id="b-on" type="radio" name="b" value="on" /></td><td><label for="b-on">On</label></td><td>&nbsp;&nbsp;</td><td><input id="b-off" type="radio" name="b" value="off" /></td><td><label for="b-off">Off</label></td><td>&nbsp;&nbsp;</td><td><input id="b-default" type="radio" name="b" value="default" checked /></td><td><label for="m-default">Use Global Settings</label></td></tr></table></td></tr></table></td>'); f.append(c);f.append(d);f.append(e);g.append(h);g.append(f);b.find(".submit").replaceWith(g)}}$pp(document).ready(function(){$pp(".describe-toggle-on").click(function(){replace_button($pp(this).parent())})}); function prepareMediaItem(b,a){var e="undefined"==typeof shortform?1:2,c=jQuery("#media-item-"+b.id);jQuery(".bar",c).remove();jQuery(".progress",c).hide();try{"undefined"!=typeof topWin.tb_remove&&topWin.jQuery("#TB_overlay").click(topWin.tb_remove)}catch(d){}isNaN(a)||!a?(c.append(a),prepareMediaItemInit(b)):c.load("async-upload.php",{attachment_id:a,fetch:e},function(){prepareMediaItemInit(b);updateMediaForm();replace_button($pp("#media-item-"+b.id))})} function updateMediaForm(){var b=jQuery("form.type-form #media-items").children(),a=jQuery("#media-items").children();1==b.length&&(jQuery(".slidetoggle",b).slideDown(500).siblings().addClass("hidden").filter(".toggle").toggle(),replace_button($pp(".media-item")));0<a.not(".media-blank").length?jQuery(".savebutton").show():jQuery(".savebutton").hide();1<a.length?jQuery(".insert-gallery").show():jQuery(".insert-gallery").hide()};
